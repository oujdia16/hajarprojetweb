<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QCM Culture Générale</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 p-6">

  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">QCM de Culture Générale</h1>

    <form id="quizForm" class="space-y-6"></form>

    <button id="submitBtn" class="mt-6 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
      Valider les réponses
    </button>

    <div id="result" class="mt-6 text-lg font-semibold"></div>

    <button id="bruteForceBtn"
            onclick="window.location.href='contacter.html'"
            class="mt-6 bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 hidden">
      Brut Force 🔓
    </button>
  </div>

  <script>
    const qcm = [
      { question: "Quels sont les continents sur Terre ?", options: ["Europe","Asie","Afrique","Océanie","Atlantide"], correctAnswers: [0,1,2,3] },
      { question: "Quels animaux pondent des œufs ?", options: ["Poules","Chiens","Serpents","Poissons"], correctAnswers: [0,2,3] },
      { question: "Lesquels de ces objets sont des instruments de musique ?", options: ["Guitare","Piano","Chaise","Violoncelle"], correctAnswers: [0,1,3] },
      { question: "Quelles planètes font partie du système solaire ?", options: ["Mars","Pluton","Alpha Centauri","Vénus"], correctAnswers: [0,1,3] },
      { question: "Parmi ces personnalités, lesquelles sont françaises ?", options: ["Napoléon Bonaparte","Albert Einstein","Victor Hugo","Leonardo da Vinci"], correctAnswers: [0,2] }
    ];

    const form = document.getElementById('quizForm');
    const resultDiv = document.getElementById('result');
    const bruteBtn = document.getElementById('bruteForceBtn');
    const submitBtn = document.getElementById('submitBtn');

    // Génération des questions
    qcm.forEach((q, i) => {
      const div = document.createElement('div');
      div.className = 'bg-white p-4 rounded shadow';
      div.innerHTML = `<p class=\"font-semibold mb-2\">${i+1}. ${q.question}</p>`;
      q.options.forEach((opt, j) => {
        div.innerHTML += `
          <label class=\"block mb-1\">                
            <input type=\"checkbox\" name=\"q${i}\" value=\"${j}\" class=\"mr-2\" />
            ${opt}
          </label>`;
      });
      div.innerHTML += `<div id=\"correction-${i}\" class=\"mt-2 font-medium hidden\"></div>`;
      form.appendChild(div);
    });

    submitBtn.addEventListener('click', e => {
      e.preventDefault();
      let score = 0;

      qcm.forEach((q, i) => {
        const selected = [...document.querySelectorAll(`input[name=\"q${i}\"]:checked`)]
                          .map(cb => parseInt(cb.value));
        const correct = q.correctAnswers;
        const corrDiv = document.getElementById(`correction-${i}`);
        corrDiv.classList.remove('hidden');

        const ok = selected.length === correct.length && selected.every(v => correct.includes(v));
        if (ok) {
          score++;
          corrDiv.textContent = '✔ Bonne réponse';
          corrDiv.className = 'mt-2 text-green-600 font-medium';
        } else {
          corrDiv.textContent = `❌ Mauvaise réponse. Bonne(s): ${correct.map(idx => q.options[idx]).join(', ')}`;
          corrDiv.className = 'mt-2 text-red-600 font-medium';
        }
      });

      resultDiv.textContent = `Vous avez ${score} / ${qcm.length} bonnes réponses.`;

      if (score === qcm.length) {
        bruteBtn.classList.add('hidden');
        setTimeout(() => window.location.href = 'contacter.html', 1500);
      } else {
        bruteBtn.classList.remove('hidden');
      }
    });
  </script>

</body>
</html>

