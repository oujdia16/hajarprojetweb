<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QCM Culture G√©n√©rale</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 p-6">

  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">QCM de Culture G√©n√©rale</h1>

    <form id="quizForm" class="space-y-6">
      <!-- Les questions seront inject√©es ici -->
    </form>

    <button id="submitBtn" class="mt-6 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
      Valider les r√©ponses
    </button>

    <div id="result" class="mt-6 text-lg font-semibold"></div>
  </div>

  <script>
    const qcm = [
    {
      question: "Quels sont les continents sur Terre ?",
      options: ["Europe", "Asie", "Afrique", "Oc√©anie", "Atlantide"],
      correctAnswers: [0, 1, 2, 3]
    },
    {
      question: "Quels animaux pondent des ≈ìufs ?",
      options: ["Poules", "Chiens", "Serpents", "Poissons"],
      correctAnswers: [0, 2, 3]
    },
    {
      question: "Lesquels de ces objets sont des instruments de musique ?",
      options: ["Guitare", "Piano", "Chaise", "Violoncelle"],
      correctAnswers: [0, 1, 3]
    },
    {
      question: "Quelles plan√®tes font partie du syst√®me solaire ?",
      options: ["Mars", "Pluton", "Alpha Centauri", "V√©nus"],
      correctAnswers: [0, 1, 3]
    },
    {
      question: "Parmi ces personnalit√©s, lesquelles sont fran√ßaises ?",
      options: ["Napol√©on Bonaparte", "Albert Einstein", "Victor Hugo", "Leonardo da Vinci"],
      correctAnswers: [0, 2]
    }
  ];

  const form = document.getElementById('quizForm');

  qcm.forEach((q, index) => {
    const questionDiv = document.createElement('div');
    questionDiv.className = 'bg-white p-4 rounded shadow';
    questionDiv.id = `question-${index}`;

    const questionTitle = document.createElement('p');
    questionTitle.className = 'font-semibold mb-2';
    questionTitle.textContent = `${index + 1}. ${q.question}`;
    questionDiv.appendChild(questionTitle);

    q.options.forEach((opt, i) => {
      const id = `q${index}_opt${i}`;
      const label = document.createElement('label');
      label.className = 'block mb-1';

      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.name = `q${index}`;
      checkbox.value = i;
      checkbox.id = id;
      checkbox.className = 'mr-2';

      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(opt));
      questionDiv.appendChild(label);
    });

    const correction = document.createElement('div');
    correction.id = `correction-${index}`;
    correction.className = 'mt-2 text-red-600 font-medium hidden';
    questionDiv.appendChild(correction);

    form.appendChild(questionDiv);
  });

  document.getElementById('submitBtn').addEventListener('click', function (e) {
    e.preventDefault();
    let score = 0;

    qcm.forEach((q, index) => {
      const selected = [...document.querySelectorAll(`input[name="q${index}"]:checked`)].map(cb => parseInt(cb.value));
      const correct = q.correctAnswers;

      const isCorrect = selected.length === correct.length &&
        selected.every(val => correct.includes(val));

      const correctionDiv = document.getElementById(`correction-${index}`);
      correctionDiv.classList.remove("hidden");

      if (isCorrect) {
        score++;
        correctionDiv.textContent = "‚úî Bonne r√©ponse";
        correctionDiv.className = 'mt-2 text-green-600 font-medium';
      } else {
        const bonnesReponses = q.correctAnswers.map(i => q.options[i]).join(", ");
        correctionDiv.textContent = `‚ùå Mauvaise r√©ponse. La bonne r√©ponse √©tait : ${bonnesReponses}`;
        correctionDiv.className = 'mt-2 text-red-600 font-medium';
      }
    });

    const resultDiv = document.getElementById('result');
    resultDiv.textContent = `Vous avez ${score} / ${qcm.length} bonnes r√©ponses.`;

    // Si score = 5 => redirection
    if (score === qcm.length) {
      setTimeout(() => {
        window.location.href = "contactez-moi.html";
      }, 2000);
    } else {
      // Affiche le bouton "Brute Force" si score < 5
      if (!document.getElementById('bruteForceBtn')) {
        const btn = document.createElement('button');
        btn.id = 'bruteForceBtn';
        btn.textContent = "Brute Force üîì";
        btn.className = "mt-4 bg-red-500 text-white px-6 py-2 rounded hover:bg-red-600 block";
        btn.onclick = () => window.location.href = "contactez-moi.html";
        resultDiv.appendChild(btn);
      }
    }
  });
  </script>
</body>

