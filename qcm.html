<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QCM Culture G√©n√©rale</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 p-6">

  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">QCM de Culture G√©n√©rale</h1>

    <form id="quizForm" class="space-y-6"></form>

    <button id="nextBtn" class="mt-6 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 hidden">
      Suivant
    </button>

    <div id="result" class="mt-6 text-lg font-semibold"></div>

    <button id="bruteForceBtn"
            class="mt-6 bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 hidden">
      Brut Force üîì
    </button>

    <div id="bruteStatus" class="mt-4 text-center text-sm text-gray-700 font-mono"></div>

    <button id="restartBtn"
            class="mt-4 bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700 hidden">
      Recommencer le QCM üîÑ
    </button>
  </div>

  <script>
    const qcm = [
      { question: "Quels sont les continents sur Terre ?", options: ["Europe","Asie","Afrique","Oc√©anie","Atlantide"], correctAnswers: [0,1,2,3] },
      { question: "Quels animaux pondent des ≈ìufs ?", options: ["Poules","Chiens","Serpents","Poissons"], correctAnswers: [0,2,3] },
      { question: "Lesquels de ces objets sont des instruments de musique ?", options: ["Guitare","Piano","Chaise","Violoncelle"], correctAnswers: [0,1,3] },
      { question: "Quelles plan√®tes font partie du syst√®me solaire ?", options: ["Mars","Pluton","Alpha Centauri","V√©nus"], correctAnswers: [0,1,3] },
      { question: "Parmi ces personnalit√©s, lesquelles sont fran√ßaises ?", options: ["Napol√©on Bonaparte","Albert Einstein","Victor Hugo","Leonardo da Vinci"], correctAnswers: [0,2] }
    ];

    const form = document.getElementById('quizForm');
    const resultDiv = document.getElementById('result');
    const bruteBtn = document.getElementById('bruteForceBtn');
    const bruteStatus = document.getElementById('bruteStatus');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');

    let currentQuestion = 0;
    let score = 0;

    function showQuestion(index) {
      form.innerHTML = '';
      const q = qcm[index];
      const div = document.createElement('div');
      div.className = 'bg-white p-4 rounded shadow';
      div.innerHTML = `<p class="font-semibold mb-2">${index + 1}. ${q.question}</p>`;
      q.options.forEach((opt, j) => {
        div.innerHTML += `
          <label class="block mb-1">
            <input type="checkbox" name="q${index}" value="${j}" class="mr-2" />
            ${opt}
          </label>`;
      });
      form.appendChild(div);
      nextBtn.textContent = (index === qcm.length - 1) ? "Terminer" : "Suivant";
      nextBtn.classList.remove('hidden');
    }

    function checkAnswer() {
      const selected = [...document.querySelectorAll(`input[name="q${currentQuestion}"]:checked`)]
        .map(cb => parseInt(cb.value));
      const correct = qcm[currentQuestion].correctAnswers;
      const ok = selected.length === correct.length && selected.every(v => correct.includes(v));
      if (ok) score++;
    }

    nextBtn.addEventListener('click', (e) => {
      e.preventDefault();
      checkAnswer();
      currentQuestion++;

      if (currentQuestion < qcm.length) {
        showQuestion(currentQuestion);
      } else {
        showResult();
      }
    });

    function showResult() {
      form.innerHTML = '';
      nextBtn.classList.add('hidden');
      resultDiv.textContent = `Vous avez ${score} / ${qcm.length} bonnes r√©ponses.`;

      if (score !== qcm.length) {
        bruteBtn.classList.remove('hidden');
        restartBtn.classList.remove('hidden');
      } else {
        setTimeout(() => window.location.href = 'contacter.html', 1500);
      }
    }

    restartBtn.addEventListener('click', () => {
      score = 0;
      currentQuestion = 0;
      resultDiv.textContent = '';
      bruteBtn.classList.add('hidden');
      bruteStatus.textContent = '';
      bruteBtn.disabled = false;
      bruteBtn.classList.remove('opacity-60', 'cursor-not-allowed');
      restartBtn.classList.add('hidden');
      showQuestion(currentQuestion);
    });

    bruteBtn.addEventListener('click', () => {
      bruteBtn.disabled = true;
      bruteBtn.classList.add('opacity-60', 'cursor-not-allowed');
      bruteStatus.textContent = "Test des combinaisons possibles...";

      let dots = 0;
      const interval = setInterval(() => {
        dots = (dots + 1) % 4;
        bruteStatus.textContent = "Test des combinaisons possibles" + '.'.repeat(dots);
      }, 400);

      setTimeout(() => {
        clearInterval(interval);
        bruteStatus.textContent = "Acc√®s accord√© ‚úÖ Redirection...";
        setTimeout(() => {
          window.location.href = 'contacter.html';
        }, 1000);
      }, 3000);
    });

    
    showQuestion(currentQuestion);
  </script>

</body>
